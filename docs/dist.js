"use strict";angular.module("main",[]);var DataService=function(t){var e=this;e.employeeData=[],e.fetchData=function(){return new Promise(function(a,n){t.get("new_hire.json").then(function(t){e.employeeData=t,a()}).catch(function(t){console.error(t),e.employeeData=null,n(t)})})},this.getData=function(){return new Promise(function(t,a){e.fetchData().then(function(){t(e.employeeData.data)}).catch(function(t){a(t)})})}};DataService.$inject=["$http"],angular.module("main").service("DataService",DataService),angular.module("main").controller("MainController",function(){}),angular.module("main").component("controlBarButton",{bindings:{title:"<",action:"<"},template:'\n\t\t\t<div class="control-bar-button" ng-click="$ctrl.action()">\n\t\t\t\t{{$ctrl.title}}\n\t\t\t</div>\n\t\t'}),angular.module("main").component("controlBar",{transclude:!0,template:'\n\t\t\t<div class="control-bar">\n\t\t\t\t<ng-transclude></ng-transclude>\n\t\t\t</div>\n\t\t'}),angular.module("main").component("dashboardHeader",{bindings:{title:"<"},template:'\n\t\t\t<div class="dashboard-header">\n\t\t\t\t{{ $ctrl.title }}\n\t\t\t</div>\n\t\t'});var getJobTitleCountData=function(t){var e=new Set,a=new Map;t.map(function(t){return e.add(t.jobTitle)});var n=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var s=l.value;a.set(s,0)}}catch(t){r=!0,o=t}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return t.map(function(t){return a.set(t.jobTitle,a.get(t.jobTitle)+1)}),a},getGenderCountData=function(t){var e=new Set,a=new Map;t.map(function(t){return e.add(t.gender)});var n=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var s=l.value;a.set(s,0)}}catch(t){r=!0,o=t}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return t.map(function(t){return a.set(t.gender,a.get(t.gender)+1)}),a},getPieData=function(t){var e=[],a=!0,n=!1,r=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var i=o.value;e.push({name:i[0],y:i[1]})}}catch(t){n=!0,r=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw r}}return e},DashboardController=function(t,e){var a=this;a.loading=!0,a.data=[],a.controlBarButtons=[{label:"Add Employee",action:function(){event.stopPropagation(),console.log("Thank you for hiring me!"),a.data.push({name:"Dan Arias",jobTitle:"Front-End Developer",tenure:"1",gender:"Male"}),a.jobTitlePieChartData=getPieData(getJobTitleCountData(a.data)),a.genderBarChartData=getPieData(getGenderCountData(a.data))}}],a.jobTitlePieChartTitle="Employees by Job Title",a.jobTitlePieChartSeriesTitle="Job Title",a.jobTitlePieChartData=[],a.genderBarChartTitle="Employees by Gender",a.genderBarChartSeriesTitle="Gender",a.genderBarChartData=[],this.$onInit=function(){e.getData().then(function(e){a.data=e,t.$apply(function(){a.loading=!1,a.jobTitlePieChartData=getPieData(getJobTitleCountData(a.data)),a.genderBarChartData=getPieData(getGenderCountData(a.data))})}).catch(function(t){console.error(t)})}};DashboardController.$inject=["$scope","DataService"],angular.module("main").component("dashboard",{controller:DashboardController,template:'\n\t\t\t<dashboard-header title="\'Corporate Employees\'"></dashboard-header>\n\t\t\t<div ng-if="!$ctrl.loading">\n\t\t\t\t<control-bar>\n\t\t\t\t\t<control-bar-button \n\t\t\t\t\t\tng-repeat="button in $ctrl.controlBarButtons" \n\t\t\t\t\t\ttitle="button.label" \n\t\t\t\t\t\taction="button.action">\n\t\t\t\t\t</control-bar-button>\n\t\t\t\t</control-bar>\n\t\t\t\t<employee-table employee-data="$ctrl.data"></employee-table>\n\t\t\t\t<div class="dashboard-charts">\n\t\t\t\t\t<div class="chart">\n\t\t\t\t\t\t<pie-chart \n\t\t\t\t\t\t\ttitle="$ctrl.jobTitlePieChartTitle" \n\t\t\t\t\t\t\tseries-title="$ctrl.jobTitlePieChartSeriesTitle"\n\t\t\t\t\t\t\tpie-data="$ctrl.jobTitlePieChartData">\n\t\t\t\t\t\t</pie-chart>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="chart">\n\t\t\t\t\t\t<histogram \n\t\t\t\t\t\t\ttitle="$ctrl.genderBarChartTitle"\n\t\t\t\t\t\t\tseries-title="$ctrl.genderBarChartSeriesTitle"\n\t\t\t\t\t\t\tbar-data="$ctrl.genderBarChartData">\n\t\t\t\t\t\t</histogram>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t'}),angular.module("main").component("employeeTableHeadings",{bindings:{sortTable:"<",sortedColumn:"<",sortOrder:"<"},controller:function(){var t=this;t.headings=["Name","Job Title","Tenure","Gender"],t.sortClasses={none:["fas","fa-sort"],asc:["fas","fa-sort-up"],desc:["fas","fa-sort-down"]},t.sortClass=t.sortClasses.none},template:'\n\t\t\t<div class="employeeTableHeadings">\n\t\t\t\t<div \n\t\t\t\tng-repeat="heading in $ctrl.headings"\n\t\t\t\tclass="employeeTableCell">\n\t\t\t\t\t{{heading}}\n\t\t\t\t\t<div class="sort-arrows" ng-click="$ctrl.sortTable(heading)">\n\t\t\t\t\t\t<i ng-class="heading === $ctrl.sortedColumn ?\n\t\t\t\t\t\t\t$ctrl.sortOrder ? $ctrl.sortClasses.asc : $ctrl.sortClasses.desc :\n\t\t\t\t\t\t\t$ctrl.sortClass"\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'}),angular.module("main").component("employeeTableRow",{bindings:{employeeRowData:"<"},transclude:!0,template:'\n\t\t\t<ng-transclude>\n\t\t\t\t<div class="employeeTableRow">\n\t\t\t\t\t<div class="employeeTableCell">{{$ctrl.employeeRowData.name}}</div>\n\t\t\t\t\t<div class="employeeTableCell">{{$ctrl.employeeRowData.jobTitle}}</div>\n\t\t\t\t\t<div class="employeeTableCell">{{$ctrl.employeeRowData.tenure}}</div>\n\t\t\t\t\t<div class="employeeTableCell">{{$ctrl.employeeRowData.gender}}</div>\n\t\t\t\t</div>\n\t\t\t</ng-transclude>\n\t\t\t\n\t\t'}),angular.module("main").component("employeeTable",{bindings:{employeeData:"<"},controller:function(){var t=this;t.nameSortToggleAsc=!1,t.jobTitleSortToggleAsc=!1,t.tenureSortToggleAsc=!1,t.genderSortToggleAsc=!1,t.sortBy=function(t,e){return function(a,n){return a[t]===n[t]?0:a[t]<n[t]?e?1:-1:e?-1:1}},t.sortByNum=function(t,e){return function(a,n){return parseInt(a[t],10)===parseInt(n[t],10)?0:parseInt(a[t],10)<parseInt(n[t],10)?e?1:-1:e?-1:1}},t.sortedColumn="",t.sortAsc=null,t.sortTable=function(e){switch(e){case"Name":t.employeeData=t.employeeData.sort(t.sortBy("name",t.nameSortToggleAsc)),t.nameSortToggleAsc=!t.nameSortToggleAsc,t.sortedColumn=e,t.sortAsc=t.nameSortToggleAsc;break;case"Job Title":t.employeeData=t.employeeData.sort(t.sortBy("jobTitle",t.jobTitleSortToggleAsc)),t.jobTitleSortToggleAsc=!t.jobTitleSortToggleAsc,t.sortedColumn=e,t.sortAsc=t.jobTitleSortToggleAsc;break;case"Tenure":t.employeeData=t.employeeData.sort(t.sortByNum("tenure",t.tenureSortToggleAsc)),t.tenureSortToggleAsc=!t.tenureSortToggleAsc,t.sortedColumn=e,t.sortAsc=t.tenureSortToggleAsc;break;case"Gender":t.employeeData=t.employeeData.sort(t.sortBy("gender",t.genderSortToggleAsc)),t.genderSortToggleAsc=!t.genderSortToggleAsc,t.sortedColumn=e,t.sortAsc=t.genderSortToggleAsc}}},template:'\n\t\t\t<div class="employeeTable">\n\t\t\t\t<employee-table-headings\n\t\t\t\t\tsorted-column="$ctrl.sortedColumn"\n\t\t\t\t\tsort-order="$ctrl.sortAsc" \n\t\t\t\t\tsort-table="$ctrl.sortTable">\n\t\t\t\t</employee-table-headings>\n\t\t\t\t<div \n\t\t\t\t\tng-repeat="employee in $ctrl.employeeData" \n\t\t\t\t\tng-class-odd="\'oddRow\'" \n\t\t\t\t\tng-class-even="\'evenRow\'">\n\t\t\t\t\t<employee-table-row employee-row-data="employee">\n\t\t\t\t\t</employee-table-row>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'});var createBarChart=function(t,e,a,n){Highcharts.chart(t,{chart:{type:"column"},title:{text:e},xAxis:{categories:a.map(function(t){return t.name})},yAxis:{title:null,allowDecimals:!1,minorTickInterval:1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:n,data:a.map(function(t){return t.y})}]})},HistogramController=function(t,e){var a=this,n=e.children()[0];a.$onInit=function(){createBarChart(n,a.title,a.barData,a.seriesTitle)},a.$onChanges=function(){createBarChart(n,a.title,a.barData,a.seriesTitle)}};HistogramController.$inject=["$scope","$element"],angular.module("main").component("histogram",{bindings:{title:"<",barData:"<",seriesTitle:"<"},replace:!0,controller:HistogramController,template:'\n\t\t\t<div class="bar-chart-container">\n\t\t\t\tBar Chart\n\t\t\t</div>\n\t\t'});var createPieChart=function(t,e,a,n){Highcharts.chart(t,{chart:{type:"pie"},title:{text:e},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:n,data:a}]})},PieChartController=function(t,e){var a=this,n=e.children()[0];a.$onInit=function(){createPieChart(n,a.title,a.pieData,a.seriesTitle)},a.$onChanges=function(){createPieChart(n,a.title,a.pieData,a.seriesTitle)}};PieChartController.$inject=["$scope","$element"],angular.module("main").component("pieChart",{bindings:{title:"<",pieData:"<",seriesTitle:"<"},replace:!0,controller:PieChartController,template:'\n\t\t\t<div class="pie-chart-container">\n\t\t\t\tPie Chart\n\t\t\t</div>\n\t\t'});